<VirtualHost 127.0.0.1:8080>
	# This should be added to the file
	# /etc/apache2/sites-avalible/000-default.conf

	ServerName 127.0.0.1

	DocumentRoot /var/www/html/
	
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	<Directory />
		Options FollowSymLinks
		AllowOverride None
		Require all denied
	</Directory>

	<Directory /usr/share>
		AllowOverride None
		Require all granted
	</Directory>

	<Directory /var/www/>
		Options Indexes FollowSymLinks
		AllowOverride None
		Require all granted
	</Directory>

	AccessFileName .htaccess

	<FilesMatch "^\.ht">
		Require all denied
	</FilesMatch>


	RewriteEngine On

	RewriteRule ^/foo/?$ /blogEngine/blog.php?filename=list
			#	([^/.])      Dissallows entries with '.' or '/' in their names
	# Allows 'blog' to be used instead of 'blogg'. But 'blogg' still shows
	RewriteRule ^/blog/?$                   /blogg/                           [NC,R]
	RewriteRule ^/blog/([^/]+)/?$           /blogg/$1/                        [NC,R]
	RewriteRule ^/blog/([^/]+)/([^/]+)/?$   /blogg/$1/$2/                     [NC,R]
	# If no file is chosen
	RewriteRule ^/blogg/?$                  /blogEngine/blog.php                    [NC,L]
	# If file is chosen
	RewriteRule ^/blogg/([^/]+)/?$          /blogEngine/blog.php?filename=$1        [NC,L]
	# If file is chosen but 'nav' is used
	RewriteRule ^/blogg/([^/]+)/([^/]+)/?$  /blogEngine/blog.php?filename=$1&nav=$2 [NC,L]
</VirtualHost>
